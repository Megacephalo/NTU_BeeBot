<launch>
<!--This test file should be used with a single RGB-D sensor-->

  <!--<arg name="map" default="$(find mobile_safeguard_primitive)/launch/3d_nav/maps/map.bt"/>-->
  <arg name="cloud_in" default="/camera/depth/points"/>
  <arg name="height_above_ground" default="1.3"/>

  <!--Give it a temporary blank map for testing-->
  <node name="map_server" pkg="map_server" type="map_server" 
        args="$(find mobile_safeguard_primitive)/launch/navigation/maps/blank_map.yaml"/>
  <!-- Run a static transform between /odom and /map-->
  <node pkg="tf" type="static_transform_publisher" name="odom_map_broadcaster" args="0 0 0 0 0 0 /map /odom 100" />
  <!-- Set up dummy transforms into an imaginary robot and odom frame -->
  <node name="tf_base_footprint" pkg="tf" type="static_transform_publisher" args="0 0 $(arg height_above_ground) 0 0 0 base_footprint camera_link 100"/>
  <node name="tf_odom"           pkg="tf" type="static_transform_publisher" args="0 0 0 0 0 0 odom base_footprint 100"/>

  <!--Launch RGB-D sensor-->
  <include file="$(find openni2_launch)/launch/openni2.launch"/>

  <!--Launch octomap-->  
  <node pkg="octomap_server" 
        type="octomap_server_node" 
        name="octomap_server" >
        <!--args="$(arg map)"-->
    <remap from="cloud_in" to="$(arg cloud_in)"/>
    <!-- name of the fixed frame, needs to be "/map" for SLAM -->
    <param name="frame_id" type="string" value="/map" />
    <!-- topic from where pointcloud2 messages are subscribed -->
    <param name="resolution" value="0.05" />
    <param name="latch" value="false" />
  </node>

  <node pkg="rviz" type="rviz" name="rviz" />
  <!--args="-d $(find mobile_safeguard_primitive)/launch/navigation/rviz/my_rbx1_nav_config.rviz"-->
</launch>
